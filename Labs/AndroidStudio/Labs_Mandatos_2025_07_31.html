<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio: Implementaci贸n de un Splash Screen Animado</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .prose h1, .prose h2, .prose h3, .prose h4 {
            color: #0F172A; /* slate-900 */
        }
        .prose p, .prose li {
            color: #334155; /* slate-700 */
        }
        .prose strong {
            color: #1E293B; /* slate-800 */
        }
        .prose code {
            background-color: #E2E8F0; /* slate-200 */
            color: #DC2626; /* red-600 */
            padding: 0.125rem 0.25rem;
            border-radius: 0.25rem;
            font-weight: 600;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .accordion-header svg {
            transition: transform 0.3s ease-out;
        }
        .prose ul ul {
            margin-top: 0.5em;
            margin-bottom: 0.5em;
        }
    </style>
</head>
<body class="bg-slate-50">
    <div class="container mx-auto max-w-4xl px-4 py-8 md:py-12">
        <article class="prose lg:prose-xl max-w-none">
            <header class="text-center mb-12">
                <h1>Ejercicio: Implementaci贸n de un Splash Screen Animado</h1>
                <p class="lead">Aprende a a帽adir una pantalla de bienvenida profesional a tu aplicaci贸n usando la API oficial de Splash Screen, un 铆cono vectorial y una animaci贸n simple.</p>
            </header>

            <div id="accordion-container">
                <!-- Accordion Item 1: Conceptos -->
                <div class="accordion-item bg-white rounded-lg shadow-sm mb-4">
                    <button class="accordion-header w-full flex justify-between items-center text-left p-6">
                        <h3 class="m-0 text-lg font-semibold"> Conceptos Clave</h3>
                        <svg class="w-6 h-6 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content">
                        <div class="p-6 pt-0">
                            <ul>
                                <li><strong>SplashScreen API:</strong> La librer铆a oficial de Android para crear pantallas de bienvenida compatibles con todas las versiones del sistema.</li>
                                <li><strong>VectorDrawable y AnimatedVectorDrawable:</strong> Formatos XML para crear 铆conos escalables y animaciones eficientes.</li>
                                <li><strong>Temas (Themes):</strong> C贸mo usar un tema espec铆fico para controlar la apariencia del splash screen antes de que la app se cargue.</li>
                                <li><strong>ViewModel y StateFlow:</strong> Para gestionar el estado de "carga" y decidir cu谩ndo debe desaparecer el splash screen.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Accordion Item 2: Paso 1 -->
                <div class="accordion-item bg-white rounded-lg shadow-sm mb-4">
                    <button class="accordion-header w-full flex justify-between items-center text-left p-6">
                        <h2 class="m-0 text-lg font-semibold">Paso 1: Configuraci贸n del Proyecto</h2>
                        <svg class="w-6 h-6 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content">
                        <div class="p-6 pt-0">
                            <p>Prepara tu proyecto a帽adiendo las dependencias necesarias a trav茅s del Version Catalog.</p>
                            <ul>
                                <li><strong>1.1. Abre <code>libs.versions.toml</code>:</strong>
                                    <ul>
                                        <li>En la secci贸n <code>[versions]</code>, a帽ade las claves para <code>coreSplashscreen</code> y <code>lifecycleViewmodelCompose</code>.</li>
                                        <li>En la secci贸n <code>[libraries]</code>, define los alias para <code>androidx-core-splashscreen</code> y <code>androidx-lifecycle-viewmodel-compose</code>, referenciando las versiones anteriores.</li>
                                    </ul>
                                </li>
                                <li><strong>1.2. Abre <code>build.gradle.kts</code> (m贸dulo app):</strong>
                                    <ul>
                                        <li>En el bloque <code>dependencies</code>, a帽ade las librer铆as usando los alias del cat谩logo (ej. <code>implementation(libs.androidx.core.splashscreen)</code>).</li>
                                    </ul>
                                </li>
                                <li><strong>1.3. Sincroniza tu proyecto con Gradle.</strong></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Accordion Item 3: Paso 2 -->
                <div class="accordion-item bg-white rounded-lg shadow-sm mb-4">
                    <button class="accordion-header w-full flex justify-between items-center text-left p-6">
                        <h2 class="m-0 text-lg font-semibold">Paso 2: Creaci贸n del Icono y la Animaci贸n</h2>
                        <svg class="w-6 h-6 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content">
                        <div class="p-6 pt-0">
                            <p>Crea los recursos visuales para tu splash screen.</p>
                            <ul>
                                <li><strong>2.1. Crea el cono Vectorial:</strong>
                                    <ul>
                                        <li>Usa el "Vector Asset Studio" de Android Studio (<code>File > New > Vector Asset</code>) para elegir un 铆cono del cat谩logo. N贸mbralo <code>ic_splash_logo.xml</code>.</li>
                                        <li><strong>Ajusta el tama帽o del lienzo:</strong> Edita el archivo XML del 铆cono. Cambia <code>android:width</code> y <code>android:height</code> a <code>288dp</code>.</li>
                                        <li><strong>Escala y Centra:</strong> Envuelve los <code>&lt;path&gt;</code> de tu 铆cono dentro de un <code>&lt;group&gt;</code>. Usa los atributos <code>scaleX</code>, <code>scaleY</code>, y <code>pivotX/Y</code> en este grupo para escalar tu 铆cono hasta que se vea bien centrado y de un tama帽o adecuado en la ventana de "Preview".</li>
                                    </ul>
                                </li>
                                <li><strong>2.2. Crea la Animaci贸n:</strong>
                                    <ul>
                                        <li>Crea un directorio de recursos <code>res/animator</code>.</li>
                                        <li>Dentro, crea un archivo XML (p. ej., <code>anim_splash_fade_in.xml</code>). Define una animaci贸n simple usando <code>objectAnimator</code>. Una buena opci贸n es animar la propiedad <code>alpha</code> (transparencia) de <code>0</code> a <code>1</code> para un efecto de aparici贸n suave.</li>
                                    </ul>
                                </li>
                                <li><strong>2.3. Conecta el cono y la Animaci贸n:</strong>
                                    <ul>
                                        <li>Crea un archivo <code>AnimatedVectorDrawable</code> en <code>res/drawable</code> (p. ej., <code>avd_splash_logo.xml</code>).</li>
                                        <li>Dentro de este archivo, usa la etiqueta <code>&lt;animated-vector&gt;</code> para enlazar tu <code>@drawable/ic_splash_logo</code> con un <code>&lt;target&gt;</code> que apunte al grupo de tu 铆cono y a tu <code>@animator/anim_splash_fade_in</code>.</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Accordion Item 4: Paso 3 -->
                <div class="accordion-item bg-white rounded-lg shadow-sm mb-4">
                    <button class="accordion-header w-full flex justify-between items-center text-left p-6">
                        <h2 class="m-0 text-lg font-semibold">Paso 3: Creaci贸n y Aplicaci贸n del Tema del Splash</h2>
                        <svg class="w-6 h-6 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content">
                        <div class="p-6 pt-0">
                            <p>Define la apariencia del splash screen a trav茅s de un tema personalizado.</p>
                            <ul>
                                <li><strong>3.1. Crea un Tema para el Splash:</strong>
                                    <ul>
                                        <li>En tu archivo <code>res/values/themes.xml</code>, crea un nuevo <code>&lt;style&gt;</code>.</li>
                                        <li>Dale un nombre (ej. <code>Theme.App.Starting</code>) y haz que herede de <code>Theme.SplashScreen</code>.</li>
                                    </ul>
                                </li>
                                <li><strong>3.2. Configura los Atributos:</strong> Dentro del tema, establece los siguientes <code>&lt;item&gt;</code>:
                                    <ul>
                                        <li><code>windowSplashScreenBackground</code>: El color de fondo.</li>
                                        <li><code>windowSplashScreenAnimatedIcon</code>: Tu recurso <code>@drawable/avd_splash_logo</code>.</li>
                                        <li><code>windowSplashScreenAnimationDuration</code>: La duraci贸n en milisegundos de tu animaci贸n.</li>
                                        <li><code>postSplashScreenTheme</code>: El tema principal de tu aplicaci贸n que se usar谩 despu茅s del splash.</li>
                                    </ul>
                                </li>
                                <li><strong>3.3. Aplica el Tema en el Manifiesto:</strong>
                                    <ul>
                                        <li>En tu <code>AndroidManifest.xml</code>, asigna el nuevo tema del splash screen al atributo <code>android:theme</code> de tu etiqueta <code>&lt;application&gt;</code> y de tu <code>MainActivity</code>.</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Accordion Item 5: Paso 4 -->
                <div class="accordion-item bg-white rounded-lg shadow-sm mb-4">
                    <button class="accordion-header w-full flex justify-between items-center text-left p-6">
                        <h2 class="m-0 text-lg font-semibold">Paso 4: Simulaci贸n de Carga con ViewModel</h2>
                        <svg class="w-6 h-6 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content">
                        <div class="p-6 pt-0">
                            <p>Gestiona el estado de carga de tu aplicaci贸n para decidir cu谩ndo ocultar el splash screen.</p>
                            <ul>
                                <li><strong>4.1. Crea un <code>MainViewModel</code>:</strong>
                                    <ul>
                                        <li>Crea una nueva clase Kotlin que herede de <code>ViewModel</code>.</li>
                                    </ul>
                                </li>
                                <li><strong>4.2. Define un Estado de Carga:</strong>
                                    <ul>
                                        <li>Dentro del ViewModel, crea un <code>MutableStateFlow&lt;Boolean&gt;</code> llamado <code>_isLoading</code> con un valor inicial de <code>true</code>.</li>
                                        <li>Exp贸n una versi贸n inmutable (<code>StateFlow</code>) llamada <code>isLoading</code>.</li>
                                    </ul>
                                </li>
                                <li><strong>4.3. Simula la Carga:</strong>
                                    <ul>
                                        <li>En el bloque <code>init</code> del ViewModel, usa <code>viewModelScope.launch</code> para iniciar una corrutina.</li>
                                        <li>Dentro de la corrutina, espera unos segundos usando <code>delay()</code> y luego cambia el valor de <code>_isLoading</code> a <code>false</code>.</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Accordion Item 6: Paso 5 -->
                <div class="accordion-item bg-white rounded-lg shadow-sm mb-4">
                    <button class="accordion-header w-full flex justify-between items-center text-left p-6">
                        <h2 class="m-0 text-lg font-semibold">Paso 5: Implementaci贸n en MainActivity</h2>
                        <svg class="w-6 h-6 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content">
                        <div class="p-6 pt-0">
                            <p>Conecta todos los componentes en tu actividad principal.</p>
                            <ul>
                                <li><strong>5.1. Inicializa el ViewModel:</strong> En tu <code>MainActivity</code>, obt茅n una instancia de tu <code>MainViewModel</code> usando la delegaci贸n <code>by viewModels()</code>.</li>
                                <li><strong>5.2. Instala el Splash Screen:</strong> En el m茅todo <code>onCreate</code>, **antes** de llamar a <code>super.onCreate()</code> o <code>setContent</code>, llama a <code>installSplashScreen()</code>.</li>
                                <li><strong>5.3. Mant茅n el Splash en Pantalla:</strong>
                                     <ul>
                                        <li>Usa el m茅todo <code>splashScreen.setKeepOnScreenCondition</code>.</li>
                                        <li>La lambda de esta condici贸n debe devolver el valor actual de tu estado <code>viewModel.isLoading.value</code>.</li>
                                    </ul>
                                </li>
                                <li><strong>5.4. (Opcional) Personaliza la Animaci贸n de Salida:</strong>
                                    <ul>
                                        <li>Usa <code>splashScreen.setOnExitAnimationListener</code> para definir una animaci贸n personalizada.</li>
                                        <li>Dentro del listener, puedes animar propiedades de <code>splashScreenView.iconView</code> como <code>SCALE_X</code>, <code>SCALE_Y</code>, y <code>ALPHA</code> usando <code>ObjectAnimator</code>.</li>
                                        <li>Aseg煤rate de llamar a <code>splashScreenView.remove()</code> cuando tu animaci贸n termine (puedes usar <code>doOnEnd</code>).</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>
            
            <footer class="text-center mt-12">
                <p>隆Mucha suerte con el ejercicio!</p>
            </footer>

        </article>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const accordionItems = document.querySelectorAll('.accordion-item');

            accordionItems.forEach(item => {
                const header = item.querySelector('.accordion-header');
                const content = item.querySelector('.accordion-content');
                const icon = header.querySelector('svg');

                header.addEventListener('click', () => {
                    const isExpanded = header.getAttribute('aria-expanded') === 'true';

                    // Close all other items
                    accordionItems.forEach(otherItem => {
                        if (otherItem !== item) {
                            const otherHeader = otherItem.querySelector('.accordion-header');
                            const otherContent = otherItem.querySelector('.accordion-content');
                            const otherIcon = otherHeader.querySelector('svg');
                            otherHeader.setAttribute('aria-expanded', 'false');
                            otherContent.style.maxHeight = null;
                            otherIcon.style.transform = 'rotate(0deg)';
                        }
                    });

                    // Toggle current item
                    if (isExpanded) {
                        header.setAttribute('aria-expanded', 'false');
                        content.style.maxHeight = null;
                        icon.style.transform = 'rotate(0deg)';
                    } else {
                        header.setAttribute('aria-expanded', 'true');
                        content.style.maxHeight = content.scrollHeight + 'px';
                        icon.style.transform = 'rotate(180deg)';
                    }
                });
            });
        });
    </script>
</body>
</html>